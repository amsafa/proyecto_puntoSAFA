<div class="min-h-screen flex flex-col">

  <!-- Main Content -->
  <main class="flex-grow flex flex-col items-center bg-white">
    <!-- Encabezado -->
    <div class="w-full flex items-center bg-[#F0F4EF] p-2">
      <img src="/assets/logo_puntosafa.png" alt="Logo Punto Safa" class="w-60 h-auto ml-60">
      <h2 class="flex-2 text-center text-4xl font-bold text-[#1F2D3D]">REGISTRO</h2>
    </div>

    <!-- Contenedor del Formulario -->
    <div class="form-container bg-[#BBCCDD] p-4 rounded-lg shadow-md mt-4 w-full max-w-md">
      <form class="space-y-10" [formGroup]="registroForm" (ngSubmit)="onRegister()">


        <!-- Campo de Nick -->
        <div class="relative">
          <input id="username" type="text" formControlName="nick" required
                 class="block w-full pl-12 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-400 sm:text-sm/6"
                 placeholder="Username o Nick">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa-solid fa-user text-gray-400"></i>
          </div>
          <div *ngIf="registroForm.get('nick')?.invalid && registroForm.get('nick')?.touched" class="absolute text-red-500">
            Nombre de usuario inválido.
          </div>
        </div>

        <!-- Campo de Nombre -->
        <div class="relative">
          <input id="nombre" type="text" formControlName="nombre" required
                 class="block w-full pl-12 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-400 sm:text-sm/6"
                 placeholder="Nombre">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa-solid fa-user text-gray-400"></i>
          </div>
          <div *ngIf="registroForm.get('nombre')?.invalid && registroForm.get('nombre')?.touched" class="absolute text-red-500">
            Nombre inválido.
          </div>
        </div>



        <!-- Campo de Apellido -->
        <div class="relative">
          <input id="apellidos" type="text" formControlName="apellidos" required
                 class="block w-full pl-12 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-400 sm:text-sm/6"
                 placeholder="Apellidos">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa-solid fa-user text-gray-400"></i>
          </div>
          <div *ngIf="registroForm.get('apellidos')?.invalid && registroForm.get('apellidos')?.touched" class="absolute text-red-500">
            Apellidos inválido.
          </div>
        </div>

        <!-- Campo de email -->
        <div class="relative">
          <input id="email" type="email" formControlName="email" required
                 class="block w-full pl-12 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-400 sm:text-sm/6"
                 placeholder="Email">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fas fa-envelope text-gray-400"></i>
          </div>
          <div *ngIf="registroForm.get('email')?.invalid && registroForm.get('email')?.touched" class="absolute text-red-500">
            Email inválido.
          </div>
        </div>


        <!-- Campo de DNI -->
        <div class="relative">
          <input id="dni" type="text"  formControlName="dni" required
                 class="block w-full pl-12 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-400 sm:text-sm/6"
                 placeholder="DNI">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa-solid fa-id-card text-gray-400"></i>
          </div>
          <div *ngIf="registroForm.get('dni')?.invalid && registroForm.get('dni')?.touched" class="absolute text-red-500">
            DNI inválido.
          </div>
        </div>

        <!-- Campo de Foto -->
        <div class="relative">
          <!-- Input de texto para mostrar el nombre del archivo -->
          <div class="relative">
            <input type="text" [value]="selectedFileName || ''" placeholder="Foto" disabled
                   class="block w-full pl-12 rounded-md border-0 py-1.5 text-gray-900 shadow-sm
                  ring-1 ring-inset ring-gray-300 placeholder:text-gray-400
                  focus:ring-2 focus:ring-inset focus:ring-sky-400 sm:text-sm/6 bg-gray-100">

            <!-- Ícono de Cámara dentro del input -->
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i class="fa-solid fa-camera text-gray-400"></i>
            </div>
          </div>

          <!-- Input de archivo (oculto visualmente, pero funcional) -->
          <input id="foto" type="file" formControlName="foto" required
                 (change)="onFileSelected($event)"
                 class="mt-2 block w-full text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300
                file:bg-gray-200 file:text-gray-700 file:rounded-md file:px-4 file:py-1.5
                hover:file:bg-gray-300 cursor-pointer">

          <!-- Mensaje de error -->
          <div *ngIf="registroForm.get('foto')?.invalid && registroForm.get('foto')?.touched"
               class="text-red-500">
            Foto inválida.
          </div>
        </div>




        <!-- Campo de Dirección -->
        <div class="relative">
          <input id="direccion" type="text" formControlName="direccion" required
                 class="block w-full pl-12 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-400 sm:text-sm/6"
                 placeholder="Dirección">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa-solid fa-map-marker-alt text-gray-400"></i>
          </div>
          <div *ngIf="registroForm.get('direccion')?.invalid && registroForm.get('direccion')?.touched" class="absolute text-red-500">
            Dirección inválida.
          </div>
        </div>

        <!-- Campo de Teléfono -->
        <div class="relative">
          <input id="telefono" type="text" formControlName="telefono" required
                 class="block w-full pl-12 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-400 sm:text-sm/6"
                 placeholder="Teléfono">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa-solid fa-phone text-gray-400"></i>
          </div>
          <div *ngIf="registroForm.get('telefono')?.invalid && registroForm.get('telefono')?.touched" class="absolute text-red-500">
            Teléfono inválido.
          </div>
        </div>



        <!-- Campo de contraseña -->
        <div class="relative">
          <input id="password" type="password" formControlName="contrasena" required
                 class="block w-full pl-12 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-400 sm:text-sm/6"
                 placeholder="Password">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa-solid fa-lock text-gray-400"></i>
          </div>
          <div *ngIf="registroForm.get('contrasena')?.invalid && registroForm.get('contrasena')?.touched" class="absolute text-red-500">
            Contraseña inválida.
          </div>
        </div>

        <!-- Campo de repetir contraseña -->
        <div class="relative">
          <input id="repeatPassword" type="password" formControlName="repetircontrasena" required
                 class="block w-full pl-12 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-400 sm:text-sm/6"
                 placeholder="Password again">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa-solid fa-lock text-gray-400"></i>
          </div>
          <div *ngIf="registroForm.errors?.['passwordMismatch'] && registroForm.get('repetircontrasena')?.touched" class="absolute text-red-500">
            Las contraseñas no coinciden.
          </div>
        </div>

        <button type="submit" class="w-full bg-[#009688] text-white py-3 rounded-md font-semibold hover:bg-[#00796B]">
          Registrarme
        </button>
      </form>


      <!-- Mostrar mensaje de error -->
      <div *ngIf="errorMessage" class="alert alert-error p-4 mb-4 bg-red-100 text-red-800 border border-red-400 rounded">
        {{ errorMessage }}
      </div>


      <p class="login-link text-center text-sm mt-8 text-gray-600">
        ¿Ya tienes cuenta? <a href="/login" class="text-[#009688] font-bold">Inicia sesión aquí.</a>
      </p>
    </div>
  </main>


</div>
