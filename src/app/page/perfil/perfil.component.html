<div class="min-h-screen flex flex-col bg-gray-100">
  <!-- Encabezado -->
  <header class="w-full bg-[#F0F4EF] flex items-center p-4 shadow">
    <img src="/assets/logo_puntosafa.png" alt="Logo Punto Safa" class="w-40 h-auto ml-10">
    <h2 class="flex-grow text-center text-2xl md:text-4xl font-bold text-[#1F2D3D]">
      Bienvenido a PuntoSafa
    </h2>
    <h1 class="text-2xl md:text-3xl font-bold text-blue-600 mr-10">¡HOLA! {{ userData?.nombre }}</h1>
  </header>

  <!-- Main Content -->
  <main class="flex-grow container mx-auto p-6 bg-white shadow-lg rounded-lg mt-6">
    <div class="flex flex-col lg:flex-row items-start lg:items-center gap-8">
      <!-- Foto del Cliente -->
      <div class="flex-shrink-0">
        <img
          [src]="userData?.foto || 'assets/logo_puntosafa.png'"
          alt="Foto del Cliente"
          class="w-80 h-80 rounded-full object-cover border-4 border-blue-500"
        >
      </div>

      <!-- Información del Cliente -->
      <div class="flex-grow bg-gray-50 p-4 rounded-lg shadow-md">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Perfil del Cliente</h2>

        <!-- Mensajes de éxito y error -->
        <p *ngIf="successMessage" class="text-green-600 mt-2 p-3 bg-green-100 border border-green-600 rounded">
          {{ successMessage }}
        </p>

        <p *ngIf="errorMessage" class="text-red-600 mt-2 p-3 bg-red-100 border border-red-600 rounded">
          {{ errorMessage }}
        </p>

        <div class="space-y-3">
          <p><strong class="text-gray-600">Email:</strong> {{ userData?.usuario?.email }}</p>
          <p><strong class="text-gray-600">Nick:</strong> {{ userData?.usuario?.nick }}</p>
          <p><strong class="text-gray-600">Nombre:</strong> {{ userData?.nombre }}</p>
          <p><strong class="text-gray-600">Apellidos:</strong> {{ userData?.apellidos }}</p>
          <p><strong class="text-gray-600">DNI:</strong> {{ userData?.DNI }}</p>
          <p><strong class="text-gray-600">Dirección:</strong> {{ userData?.direccion }}</p>
          <p><strong class="text-gray-600">Teléfono:</strong> {{ userData?.telefono }}</p>
          <p><strong class="text-gray-600">Foto:</strong> {{ userData?.foto }}</p>
          <p><strong class="text-gray-600">Contraseña:</strong> ••••••••••</p>
        </div>

        <!-- Botones más grandes y separados -->
        <div class="mt-6 flex gap-6">
          <button (click)="abrirFormulario()" class="bg-blue-500 text-white text-lg px-6 py-3 rounded shadow-md">
            Editar Perfil
          </button>

          <button (click)="abrirEdicionUsuario()" class="bg-blue-500 text-white text-lg px-6 py-3 rounded shadow-md">
            Editar Contraseña
          </button>
        </div>
      </div>



      <!-- Modal / Formulario de Edición -->
      <div *ngIf="mostrandoFormulario" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex justify-center items-center">
        <div class="bg-white p-6 rounded shadow-lg w-1/3">
          <h2 class="text-lg font-semibold mb-4">Editar Perfil</h2>


          <label>Email:</label>
          <input [(ngModel)]="usuarioEditado.usuario.email" class="w-full border p-2 rounded" disabled />

          <label>Nick:</label>
          <input [(ngModel)]="usuarioEditado.usuario.nick" class="w-full border p-2 rounded" disabled />

          <label>Nombre:</label>
          <input [(ngModel)]="usuarioEditado.nombre" class="w-full border p-2 rounded" disabled />

          <label>Dirección:</label>
          <input [(ngModel)]="usuarioEditado.direccion" class="w-full border p-2 rounded" />

          <label>Teléfono:</label>
          <input [(ngModel)]="usuarioEditado.telefono" class="w-full border p-2 rounded" />

          <label>Foto:</label>
          <input [(ngModel)]="usuarioEditado.foto" class="w-full border p-2 rounded" />


          <div class="flex justify-end mt-4">
            <button (click)="guardarCambios()" class="bg-green-500 text-white px-4 py-2 rounded mr-2">
              Guardar
            </button>

            <button (click)="cerrarFormulario()" class="bg-red-500 text-white px-4 py-2 rounded">Cancelar</button>
          </div>
        </div>
      </div>
    </div>



    <!-- Modal para editar email y contraseña -->
    <div *ngIf="mostrandoEdicionContrasena" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex justify-center items-center">
      <div class="bg-white p-6 rounded shadow-lg w-1/3">
        <h2 class="text-lg font-semibold mb-4">Editar Email y Contraseña</h2>

        <label>Contraseña:</label>
        <input type="password" [(ngModel)]="usuarioEditado.contrasena" class="w-full border p-2 rounded"
               placeholder="Nueva contraseña (opcional)" />

        <div class="flex justify-end mt-4">
          <button (click)="guardarEdicionContrasena()" class="bg-green-500 text-white px-4 py-2 rounded mr-2">
            Guardar
          </button>
          <button (click)="cerrarEdicionUsuario()" class="bg-red-500 text-white px-4 py-2 rounded">Cancelar</button>
        </div>
      </div>
    </div>

    <!-- Información del Carrito de Compras -->
    <div class="mt-8 bg-gray-100 p-4 rounded-lg shadow-md">
      <h2 class="text-lg font-semibold text-gray-700 mb-2">Carrito de Compras</h2>
      <p class="text-gray-600">Aquí se muestra la información del carrito de compras...</p>
    </div>

  </main>
</div>
